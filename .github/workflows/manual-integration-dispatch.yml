name: Manual Integration Dispatch

on:
  workflow_dispatch: {}

jobs:
  web_integration:
    name: Web integration (manual)
    runs-on: ubuntu-latest
    timeout-minutes: 50
    steps:
      - uses: actions/checkout@v4
        with:
          lfs: true
          fetch-depth: 0
      - name: Set up Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: stable
      - name: Install dependencies
        run: flutter pub get
      - name: Run web integration test
        env:
          CHROME_BIN: /usr/bin/google-chrome-stable
        run: |
          flutter config --enable-web
          flutter test integration_test/settings_view_web_integration_test.dart --verbose

  macos_integration:
    if: false
    name: macOS integration (manual)
    runs-on: macos-latest
    timeout-minutes: 60
    steps:
      - uses: actions/checkout@v4
        with:
          lfs: true
          fetch-depth: 0
      - name: Set up Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: stable
      - name: Install dependencies
        run: flutter pub get
      - name: Run macOS integration test
        run: |
          flutter test integration_test/settings_view_io_integration_test.dart -d macos --verbose
